import numpy as np
from dtw import dtw
import matplotlib.pyplot as plt
from scipy.misc import electrocardiogram
from scipy.signal import find_peaks
from numpy import convolve

x =[ 2.275090217590332,
2.38462495803833,
2.449866771697998,
2.4372973442077637,
1.8381483554840088,
1.1402385234832764,
1.7818846702575684,
2.076371431350708,
2.3720552921295166,
2.275090217590332,
2.38462495803833,
2.449866771697998,
2.4372973442077637,
1.8381483554840088,
1.1402385234832764,
1.7818846702575684,
2.076371431350708,
2.3720552921295166]

y =[ 2.275090217590332,
2.38462495803833,
2.449866771697998,
2.4372973442077637,
1.8381483554840088,
1.1402385234832764,
1.7818846702575684,
2.076371431350708,
2.3720552921295166,
2.275090217590332,
2.38462495803833,
2.449866771697998,
2.4372973442077637,
1.8381483554840088,
1.1402385234832764,
1.7818846702575684,
2.076371431350708,
2.3720552921295166]

a = [1, 1, 2, 3, 2, 0]
b = [0, 1, 1, 2, 3, 2, 1]
part_c= [0.8457030653953552, 0.8349608778953552, 0.6572265625, 0.5439453125, 0.5234375, 0.328125, 0.22265625, 0.2998046875, 0.5693359375, 0.736328125, 0.7001953125, 0.4375, 0.3212890625, 0.150390625, -0.111328125, -0.068359375, -0.126953125, -0.1210937574505806, -0.0673828125, 0.025390625, 0.1943359375, 0.4111328125, 0.5732421875, 0.7763671875, 0.7705078125, 0.7109375, 0.6298828125, 0.3681640625, 0.3408203125, 0.294921875, 0.2646484375, 0.583984375, 0.701171875, 0.67578125, 0.560546875]
triceps = [-0.01171875, -0.0693359375, -0.03027343936264515, -0.0791015625, -0.2236328125, -0.056640625, 0.0205078125, 0.1552734375, 0.3046875, 0.5478515625, 0.1611328125, 0.1240234375, 0.0390625, -0.0947265625, -0.02734375, 0.1591796875, -0.12890625, -0.0478515625, 0.0712890625, 0.056640625, 0.0966796875, 0.4257812798023224, 0.1328125, -0.0830078125, 0.1962890625, -0.263671875, -0.02734375, -0.1494140625, 0.0029296875, -0.076171875, -0.1474609375, -0.2685546875, 0.0244140625, 0.1591796875, 0.2705078125, 0.494140625, 0.2412109524011612, 0.1201171949505806, -0.11328125, -0.3251953125, -0.4306640923023224, -0.2089843600988388, -0.0556640625, -0.01171875, -0.25390625, -0.193359375, -0.1054687425494194, 0.0087890625, 0.28125, 0.9453124403953552, 0.2412109524011612, -0.014648436568677425, -0.001953125, 0.0595703162252903, -0.0546875, -0.0546875, -0.1552734375, -0.103515625, -0.154296875, -0.1708984375, -0.0527343712747097, -0.181640625, -0.1064453199505806]
arm_up = [0.099609375, -0.2958984375, -0.224609375, -0.03027343936264515, -0.322265625, -0.4326172173023224, 0.056640625, -0.083984375, 0.2822265625, -0.4111328125, 0.0654296875, 0.068359375, -0.3134765625, -0.2041015625, 0.25, 0.5419921875, 0, 0.4501953125, -0.33984375, -0.1748046875, 0.2343749850988388, 0.103515625, -0.2265625, -0.2255859375, 0.068359375, -0.2314453125, -0.5302734375, -0.04296875, 0.798828125, 0.1142578125, 0.8427733778953552, -0.1904296875, -0.4970703125, -0.11328125, 0.115234375, 0.48828125, -0.6025390625, 0.1611328125, -0.1591796875, -0.4697265326976776, -0.3896484375, 0.728515625, 0.787109375, 1.294921875, 1.3408203125, -0.08984375, -0.298828125, -0.0615234375, 0.2919921875, 0.041015625, -0.1591796875, 0.1298828125, -0.263671875, -0.5185546875, 0.15625, 0.1005859375, 0.62109375, 0.4306640923023224, 0.4726562201976776, -0.4248046576976776, -0.35546875, 0.22265625, -0.2119140475988388, -0.4619140625, 0.0400390625, 0.072265625, -0.2148437649011612, -0.2763671875, 0.181640625, 1.0234375, 0.716796875, 0.7568359375, -0.5244140625, -0.154296875, 0.2167968899011612, -0.0224609375, -0.455078125, 0.255859375, -0.0380859375, -0.4951171875, -0.014648436568677425, 0.4736327826976776, 0.5419921875, 0.5205078125, 0.4824219048023224, -0.1328125, -0.3330078125, 0.1904296875, -0.125, -0.2958984375, 0.185546875, -0.0439453125, -0.5595703125, 0.4970703125, 0.4775390923023224, 0.08984375, 0.13671875, 0.1044921800494194, 0.111328125, 0.2138672024011612, 0.1923828125, 0.25390625, 0.1533203125, 0.171875, 0.19921875, 0.1796875, 0.2197265625, 0.2421875149011612]
leg = [0.1416015625, 0.09765625, 0.14453125, 0.1826171875, 0.0605468787252903, 0.025390625, 0.04296875, 0.09375, 0.1142578125, 0.2314453125, 0.1435546875, 0.0126953125, 0.0107421875, 0.0126953125, 0.11328125, 0.1201171949505806, -0.03515625, 0.220703125, 0.0498046875, 0.03515625, 0.1201171949505806, 0.1083984449505806, 0.154296875, 0.2646484375, 0.2802734375, 0.06640625, 0.0751953125, 0.08203125, 0.1640625, 0.2343749850988388, 0.1210937574505806, 0.1533203125, 0.0966796875, 0.0693359375, 0.015625, 0.158203125, 0.36328125, 0.36328125, 0.2041015625, 0.1552734375, 0.0078125, 0.0517578125, 0.2578125, 0.1162109375, -0.1259765625, 0.279296875, 0.03027343936264515, 0.1572265625, 0.044921875, 0.1337890625, 0.248046875, 0.173828125, 0.150390625, 0.123046875, -0.015625, -0.1191406324505806, -0.0703125, 0.306640625, 0.31640625, 0.341796875, 0.3330078125, 0.2255859375, 0.013671875, 0.0585937462747097, 0.3046875, 0.1982421875, 0.11328125, 0.0546875, 0.0908203125, -0.0830078125, 0.04296875, 0.2402343899011612, 0.2216796875, 0.0458984375, 0.1533203125, -0.025390625, -0.0556640625, 0.1767578125, 0.255859375, 0.173828125, 0.181640625, 0.126953125, 0.056640625, 0.03125, 0.0771484375, 0.0205078125, 0.1337890625, 0.16015625, 0.0615234375, 0.0810546875, 0.064453125, 0.0849609375, 0.044921875, 0.0585937462747097, -0.0234375]
circles = [-0.0673828125, -0.2294921875, -0.4189452826976776, -0.39453125, -0.298828125, 0.0419921875, 0.263671875, 0.37109375, 0.2343749850988388, -0.02929687313735485, -0.685546875, -1.21875, -1.271484375, -1.6669920682907104, -1.7568359375, -1.8076171875, -1.625, -1.2548828125, -0.9287109375, -0.806640625, -0.6474609375, -0.36328125, -0.138671875, 0.296875, 0.4296875298023224, 0.0585937462747097, -0.38671875, -0.990234375, -1.287109375, -1.7578125, -2.1533203125, -2.0556640625, -1.5751953125, -1.232421875, -0.978515625, -0.8154296875, -0.74609375, -0.3193359375, -0.4912109375, -0.0830078125, 0.359375, 0.0703125, -0.287109375, -0.5546875, -1.048828125, -1.4111328125, -1.4208984375, -1.6337890625, -2.03125, -1.6660155057907104, -1.2880859375, -0.9921875, -0.9589844346046448, -0.8593750596046448, -0.4296875298023224, -0.0341796875, 0.2568359375, 0.4765625298023224, 0.1943359375, -0.3291015625, -0.89453125, -1.4931640625, -1.9765625, -2.1416015625, -1.7158204317092896, -1.4794921875, -1.220703125, -0.921875, -0.6552734375, -0.515625, -0.23046875, -0.025390625, 0.275390625, 0.6455078125, 0.4707030951976776, 0.3095703125, 0.0546875, -0.4365234375, -1.28125, -1.2255859375, -1.7685546875, -1.8603515625, -1.9189454317092896, -1.28125, -0.708984375, -0.2685546875, -0.021484375, 0.1435546875, 0.26171875, 0.25, 0.232421875, 0.26171875, 0.375, 0.2431640625, 0.24609375, 0.279296875, 0.2763671875, 0.2978515625, 0.28125, 0.255859375, 0.26953125, 0.228515625, 0.25, 0.275390625, 0.3056640625, 0.3271484375, 0.3525390625]
c= [0.1337890625, 0.60546875, 0.4775390923023224, 0.7080078125, 0.7177734375, 0.755859375, 0.9140625, 0.9033203125, 0.8457030653953552, 0.8349608778953552, 0.6572265625, 0.5439453125, 0.5234375, 0.328125, 0.22265625, 0.2998046875, 0.5693359375, 0.736328125, 0.7001953125, 0.4375, 0.3212890625, 0.150390625, -0.111328125, -0.068359375, -0.126953125, -0.1210937574505806, -0.0673828125, 0.025390625, 0.1943359375, 0.4111328125, 0.5732421875, 0.7763671875, 0.7705078125, 0.7109375, 0.6298828125, 0.3681640625, 0.3408203125, 0.294921875, 0.2646484375, 0.583984375, 0.701171875, 0.67578125, 0.560546875, 0.4560546875, 0.4052734375, 0.1962890625, 0.072265625, 0.001953125, 0.0087890625, 0, -0.0517578125, 0.0537109412252903, 0.283203125, 0.5, 0.80859375, 0.8095703125, 0.6845703125, 0.5537109375, 0.439453125, 0.3271484375, 0.3447265625, 0.1396484375, 0.4443359375, 0.58984375, 0.638671875, 0.57421875, 0.4111328125, 0.41015625, 0.0625, 0.01953125, -0.0390625, -0.0048828125, 0.009765625, 0.0947265625, 0.26171875, 0.4804687798023224, 0.697265625, 0.7021484375, 0.72265625, 0.5869140625, 0.287109375, 0.501953125, 0.064453125, 0.263671875, 0.6396484375, 0.72265625, 0.5146484375, 0.2382812649011612, 0.28125, 0.1826171875, 0.014648436568677425, -0.056640625, -0.0166015625, -0.001953125, 0.1220703125, 0.287109375, 0.4736327826976776, 0.6689453125, 0.7294921875, 0.6357421875, 0.568359375, 0.296875, 0.193359375, 0.1708984375, 0.3056640625, 0.603515625, 0.5947265625, 0.578125, 0.439453125, 0.283203125, 0.25, 0.22265625, 0.17578125, -0.0234375, -0.1640625, -0.154296875, -0.1191406324505806, -0.080078125]
def draw_peaks(x):
	x = np.array(x)
	peaks, _ = find_peaks(x, height=0.1)
	plt.plot(x)
	plt.plot(peaks, x[peaks], "x")
	plt.plot(np.zeros_like(x), "--", color="gray")
	plt.show()	

def calculate_dtw(x, y):
	x = np.array(x)
	y = np.array(y)
	euclidean_norm = lambda x, y: np.abs(x - y)
	d, cost_matrix, acc_cost_matrix, path = dtw(x, y, dist=euclidean_norm)
	print(d)

def movingaverage (values, window):
    weights = np.repeat(1.0, window)/window
    sma = np.convolve(values, weights, 'valid')
    return sma

# draw_peaks(c)
# calculate_cdtw(a, b)

yMA = movingaverage(part_c, 6)
plt.plot(yMA)
plt.show()

draw_peaks(yMA)
calculate_dtw(part_c, c)


